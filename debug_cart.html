<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Cart - Gulf Global Co</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { padding: 2rem; }
        .debug-section { margin: 2rem 0; padding: 1rem; border: 1px solid #ddd; border-radius: 5px; }
        .test-button { margin: 0.5rem; }
    </style>
</head>
<body>
    <h1>ðŸ›’ Cart Debug Page</h1>

    <div class="debug-section">
        <h3>Test Buttons</h3>
        <button class="btn btn-primary add-to-cart test-button" data-product="Test Product 1" data-price="100">Add to Cart - Product 1</button>
        <button class="btn btn-secondary buy-now test-button" data-product="Test Product 1" data-price="100">Buy Now - Product 1</button>
        <br>
        <button class="btn btn-primary add-to-cart test-button" data-product="Test Product 2" data-price="200">Add to Cart - Product 2</button>
        <button class="btn btn-secondary buy-now test-button" data-product="Test Product 2" data-price="200">Buy Now - Product 2</button>
    </div>

    <div class="debug-section">
        <h3>Cart Status</h3>
        <p>Cart Count: <span id="cart-count">0</span></p>
        <p>Cart Items: <span id="cart-items-count">0</span></p>
        <button onclick="console.log('Cart contents:', cart); alert('Cart: ' + JSON.stringify(cart, null, 2));">Show Cart Contents</button>
    </div>

    <div class="debug-section">
        <h3>Debug Info</h3>
        <p>Open browser console (F12) to see debug logs</p>
        <button onclick="testCartFunction()">Test Cart Function</button>
        <button onclick="testBuyNowFunction()">Test Buy Now Function</button>
    </div>

    <!-- Navigation with Cart -->
    <nav class="navbar" style="position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>Gulf Global Co</h2>
            </div>
            <div class="nav-actions">
                <a href="#" class="nav-link cart-link" id="cart-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cart-count-nav">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Shopping Cart Modal -->
    <div id="cart-modal" class="cart-modal">
        <div class="cart-modal-content">
            <div class="cart-header">
                <h3>Shopping Cart</h3>
                <span class="close-cart">&times;</span>
            </div>
            <div class="cart-items" id="cart-items">
                <!-- Cart items will be added here dynamically -->
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <strong>Total: â‚¹<span id="cart-total">0</span></strong>
                </div>
                <button class="btn btn-primary checkout-whatsapp" id="checkout-whatsapp">
                    <i class="fab fa-whatsapp"></i> Checkout via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <script>
        // Debug functions
        function testCartFunction() {
            console.log('Testing addToCart function...');
            if (typeof addToCart === 'function') {
                addToCart('Debug Product', 150);
                console.log('addToCart function exists and was called');
            } else {
                console.error('addToCart function not found!');
            }
        }

        function testBuyNowFunction() {
            console.log('Testing buyNow function...');
            if (typeof buyNow === 'function') {
                buyNow('Debug Product', 150);
                console.log('buyNow function exists and was called');
            } else {
                console.error('buyNow function not found!');
            }
        }

        // Check if script loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            console.log('Cart variable:', typeof cart !== 'undefined' ? cart : 'undefined');
            console.log('addToCart function:', typeof addToCart !== 'undefined' ? 'exists' : 'missing');
            console.log('buyNow function:', typeof buyNow !== 'undefined' ? 'exists' : 'missing');

            // Update cart count display
            setInterval(() => {
                const cartCount = document.getElementById('cart-count');
                const cartItemsCount = document.getElementById('cart-items-count');
                const cartCountNav = document.getElementById('cart-count-nav');

                if (typeof cart !== 'undefined') {
                    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                    if (cartCount) cartCount.textContent = totalItems;
                    if (cartItemsCount) cartItemsCount.textContent = cart.length;
                    if (cartCountNav) cartCountNav.textContent = totalItems;
                }
            }, 1000);
        });
    </script>

    <script src="js/script.js?v=2.0"></script>
</body>
</html>
